<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Field Spread Rate of Cover Aggregate (Canvas Mat)</title>
<link href="manifest.webmanifest" rel="manifest"/>
<meta content="#ffd400" name="theme-color"/>
<style>
    body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f7f7f9; }
    #page { display:flex; flex-direction:column; justify-content:space-between;
             max-width:210mm; margin:0 auto; background:#fff; min-height:100vh; }
    .wrap { padding:14px; flex:1; }
    .header { display:flex; align-items:center; border-bottom:2px solid #ccc; padding-bottom:6px; margin-bottom:10px; }
    .logo { height:50px; margin-right:12px; }
    h1 { font-size:20px; margin:0; flex:1; }
    .info-grid { display:grid; grid-template-columns:1fr 1fr; gap:4px; margin:10px 0; }
    .info-grid label { font-weight:bold; font-size:12px; }
    .info-grid input { width:100%; border:1px solid #ccc; padding:4px; font-size:12px; }
    .panel { border:1px solid #ccc; padding:8px; margin:6px 0; border-radius:6px; background:#fff; }
    table { width:100%; border-collapse:collapse; font-size:12px; }
    th, td { border:1px solid #999; padding:4px; }
    th { background:#eee; text-align:left; }
    .actions { margin:12px 0; display:flex; justify-content:space-between; }
    .btn-pdf { background:#4CAF50; color:#fff; }
    .btn-reset { background:#f44336; color:#fff; }
    button { padding:8px 14px; border:none; border-radius:4px; cursor:pointer; font-weight:bold; }
    footer { text-align:center; font-size:10px; color:#000; font-weight:bold; padding:6px; }
    @page { size: A4 portrait; margin: 10mm; }
    @media print {
      html, body { width:210mm; height:297mm; margin:0; padding:0; }
      #page { transform: scale(0.95); transform-origin: top left; width:105%; height:auto; }
      .actions { display:none; }
      * { -webkit-print-color-adjust: exact; }
    }
  </style>
</head>
<body>
<div id="page">
  <div class="wrap">
    <div class="header">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f2/OOjs_UI_icon_edit-ltr-progressive.svg/48px-OOjs_UI_icon_edit-ltr-progressive.svg.png" class="logo" alt="logo" />
      <h1>Page 2 — Additional Mat Test Notes</h1>
      <div class="badge">PWA</div>
    </div>

    <div class="section">
      <h2>Field Notes</h2>
      <div class="info-grid">
        <label>Date</label><input type="date" id="p2_date">
        <label>Location</label><input type="text" id="p2_location" placeholder="e.g., Bowenville–Moola Rd">
        <label>Inspector</label><input type="text" id="p2_inspector" placeholder="Your name">
        <label>Weather</label><input type="text" id="p2_weather" placeholder="e.g., Sunny 26°C">
      </div>
    </div>

    <div class="section">
      <h2>Observations</h2>
      <textarea id="p2_observations" rows="8" style="width:100%;"></textarea>
    </div>

    <div class="section">
      <h2>Attachments</h2>
      <p>Paste links to photos/videos or IDs here:</p>
      <textarea id="p2_links" rows="4" style="width:100%;"></textarea>
    </div>

    <div class="btn-row" style="margin-top:14px;">
      <a class="btn" href="index.html">← Back to Page 1</a>
      <button class="btn" id="p2_save">Save Notes</button>
      <button class="btn-reset" id="p2_reset">Reset</button>
    </div>
  </div>
  <footer>v2.0.2 Pro — Page 2 — 2025-10-09</footer>
</div>

<script>
// Simple localStorage saver for Page 2
(function() {
  const $ = (id) => document.getElementById(id);
  const fields = ['p2_date','p2_location','p2_inspector','p2_weather','p2_observations','p2_links'];
  const KEY = 'mattest_page2_v1';

  // Load existing
  try {
    const data = JSON.parse(localStorage.getItem(KEY) || '{}');
    fields.forEach(f => { if (data[f] !== undefined) $(f).value = data[f]; });
    if(!data['p2_date']) { $('p2_date').valueAsDate = new Date(); }
  } catch(e) { console.warn(e); }

  $('p2_save').addEventListener('click', () => {
    const data = {
      p2_date: $('p2_date').value,
      p2_location: $('p2_location').value,
      p2_inspector: $('p2_inspector').value,
      p2_weather: $('p2_weather').value,
      p2_observations: $('p2_observations').value,
      p2_links: $('p2_links').value,
    };
    localStorage.setItem(KEY, JSON.stringify(data));
    alert('Saved locally on this device.');
  });

  $('p2_reset').addEventListener('click', () => {
    if (confirm('Clear Page 2 notes?')) {
      fields.forEach(f => $(f).value = '');
      localStorage.removeItem(KEY);
    }
  });
})();

// Register SW (same path as index)
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js');
}
</script>
</body>
</html>
