
<!doctype html><meta charset="utf-8"><title>SW Kill</title>
<style>body{font:16px/1.4 system-ui;padding:24px} button{padding:10px 14px}</style>
<h1>Service Worker — Clear & Reload</h1>
<p>This page unregisters any service worker and clears caches for this origin.</p>
<button id="go">Clear Cache & Reload</button>
<pre id="out"></pre>
<script>
document.getElementById('go').onclick = async () => {
  let logs = [];
  try {
    const regs = await navigator.serviceWorker.getRegistrations();
    for (const r of regs) { await r.unregister(); logs.push('Unregistered SW'); }
    const keys = await caches.keys();
    for (const k of keys) { await caches.delete(k); logs.push('Deleted cache: '+k); }
    logs.push('Done. Reloading…');
  } catch(e){ logs.push('Error: '+e); }
  document.getElementById('out').textContent = logs.join('\n');
  setTimeout(()=> location.reload(true), 600);
}
</script>
