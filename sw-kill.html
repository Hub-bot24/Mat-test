<!doctype html><meta charset="utf-8"><title>Force Update</title>
<style>body{font:16px/1.4 system-ui;padding:24px}button{padding:10px 14px}</style>
<h2>Force Update for this site</h2>
<p>If a device is stuck on an old version, click the button.</p>
<button id="go">Clear & Reload</button>
<pre id="out"></pre>
<script>
document.getElementById('go').onclick = async () => {
  const out = s => document.getElementById('out').textContent += s + '\n';
  try{
    if ('serviceWorker' in navigator){
      const regs = await navigator.serviceWorker.getRegistrations();
      for (const r of regs) { await r.unregister(); out('Unregistered SW'); }
    }
    const keys = await caches.keys();
    for (const k of keys) { await caches.delete(k); out('Deleted cache '+k); }
    out('Done. Reloadingâ€¦'); setTimeout(()=>location.reload(true), 400);
  }catch(e){ out('Error: '+e); }
};
</script>