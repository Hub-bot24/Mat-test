<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Lot Conformance — Page 1</title>
<link rel="icon" href="icons/colas-logo.png">
<link rel="stylesheet" href="style.css?v=v3.25-heal">
<script>
// Self-heal: once per device, unregister any old service workers on this origin
// and clear caches, then force a one-time reload with a cache-busting query.
(async () => {
  try {
    if (!localStorage.getItem('mtp_healed_v325')) {
      if ('serviceWorker' in navigator) {
        const regs = await navigator.serviceWorker.getRegistrations();
        for (const r of regs) { await r.unregister(); }
      }
      const keys = await caches.keys();
      for (const k of keys) { await caches.delete(k); }
      localStorage.setItem('mtp_healed_v325', '1');
      const u = new URL(location.href);
      u.searchParams.set('fresh', String(Date.now()));
      location.replace(u.toString());
    }
  } catch(e) {
    // ignore; UI still works
  }
})();
</script>
</head>
<body>
<header class="brand">
  <img class="logo" src="icons/colas-logo.png" alt="COLAS">
  <div>
    <h1>Spray Seal QA Lot Pack — New Works &amp; Reseal QA V1</h1>
    <div class="mute">v3.25-heal • 2025-09-17</div>
  </div>
</header>

<main class="page">
  <section class="grid two">
    <label>Job No.<input id="jobNo" type="text"></label>
    <label>Project Name<input id="projectName" type="text"></label>
  </section>

  <section class="grid two">
    <label>Lot<input id="lot" type="text"></label>
    <label>Area (m²)<input id="area" type="number" step="0.01"></label>
  </section>

  <section class="grid two">
    <label>Bitumen<input id="bitumen" type="text"></label>
    <label>Grade<input id="grade" type="text"></label>
  </section>

  <section class="grid two">
    <label>Aggregate Size (mm)<input id="aggSize" type="text"></label>
    <label>Kerosene<input id="kerosene" type="text"></label>
  </section>

  <section class="grid two">
    <label>Additive<input id="additive" type="text"></label>
    <label>Total Litres<input id="totalLitres" type="number" step="0.01"></label>
  </section>

  <section class="grid one">
    <label>Description<textarea id="description" rows="3"></textarea></label>
  </section>

  <section class="grid three">
    <label>QA Conducted By<input id="qaBy" type="text"></label>
    <label>Conformed By<input id="conformedBy" type="text"></label>
    <label>Seal Designed By<input id="sealBy" type="text"></label>
  </section>

  <section class="grid three">
    <label>Work Start<input id="workStart" type="date"></label>
    <label>Work End<input id="workEnd" type="date"></label>
    <label>Guaranteed<input id="guaranteed" type="date"></label>
  </section>

  <h2>Attachments</h2>
  <div class="attach">
    <button class="tri" data-key="qvc">□</button><span>QVC Attached</span>
    <button class="tri" data-key="spray">□</button><span>Spray Sheet</span>
    <button class="tri" data-key="memo">□</button><span>Site Memo</span>
    <button class="tri" data-key="ball">□</button><span>Ball Penetration Test</span>
    <button class="tri" data-key="photos">□</button><span>Photos</span>
    <button class="tri" data-key="agg">□</button><span>Agg Test Results</span>
    <button class="tri" data-key="docket">□</button><span>Delivery Docket</span>
    <button class="tri" data-key="tins">□</button><span>Sample Tins</span>
    <button class="tri" data-key="ncrs">□</button><span>NCRs</span>
  </div>

  <section class="grid one">
    <label>Notes<textarea id="notes" rows="3"></textarea></label>
  </section>

  <footer class="actions">
    <div class="left">
      <button id="pdf1" class="btn primary">PDF</button>
      <button id="reset1" class="btn danger">Reset All</button>
    </div>
    <div class="right">
      <span class="ver">v3.25-heal — 2025-09-17 — J. Hugo</span>
      <a class="btn ok" href="page6.html?v=v3.25-heal">Next Page →</a>
    </div>
  </footer>
</main>

<script src="app.js?v=v3.25-heal" defer></script>
</body>
</html>
